<label>Backfill <span class="linky" data-bind="
    click: checkBackfill,
    visible: meta.backfill">check</span></label>

<input type="text" class="apiquery--input" data-bind="
    makeBackfillDroppable: true,
    css: {
        underDrag: state.underDrag
    },
    visible: state.visibleContainer() === 'capi',
    value: meta.apiQuery,
    valueUpdate: ['afterkeydown', 'input']"/>

<div class="backfilledCollection backfilledElement" data-bind="
    makeBackfillDroppable: true,
    css: {
        underDrag: state.underDrag
    },
    visible: state.visibleContainer() === 'collection'
">
    <span class="backfilledCollectionLabel backfilledElementLabel" >
        <!-- ko with: meta.parentCollection -->
        <span data-bind="
            text: displayName,
            attr: {
                title: fronts.join('\n')
            }"></span>
        <!-- /ko -->
        <a class="backfilledCollectionClear backfilledElementClear" data-bind="
            click: clearBackfilledElement">
            <i class="fa fa-remove"></i>
        </a>
    </span>
</div>

<div class="backfilledFrontMetadata backfilledElement" data-bind="
    makeBackfillDroppable: true,
    css: {
        underDrag: state.underDrag
    },
    visible: state.visibleContainer() === 'front-metadata'
">
    <span class="backfilledFrontMetadataLabel backfilledElementLabel" >
        <!-- ko with: meta.parentFrontMetadata -->
        <span data-bind="text: metadataId"></span> on <span data-bind="text: frontId"></span>
        <!-- /ko -->
        <a class="backfilledFrontMetadataClear backfilledElementClear" data-bind="
            click: clearBackfilledElement">
            <i class="fa fa-remove"></i>
        </a>
    </span>
</div>

<!-- ko if: state.queryStatus -->
    <div class="api-query-results">
        <!-- ko if: state.queryStatus() === 'check' -->
            <div class="api-query-status--check queryStatusText">Checking&hellip;</div>
        <!-- /ko -->
        <!-- ko if: state.queryStatus() === 'invalid' -->
            <div class="api-query-status--invalid queryStatusText">No matches found</div>
        <!-- /ko -->
        <!-- ko if: state.queryStatus() === 'valid' -->
            <div class="api-query-status--valid queryStatusText">Found matches:</div>
        <!-- /ko -->

        <div data-bind="foreach: results">
            <!-- ko if: $data.href -->
                <a target="_article" class="api-query-result" data-bind="
                    attr: {href: href},
                    text: fields.headline"></a>
            <!-- /ko -->
            <!-- ko ifnot: $data.href -->
                <span class="api-query-result" data-bind="text: $data"></span>
            <!-- /ko -->
        </div>
    </div>
<!-- /ko -->
